<!DOCTYPE html>
<html>
  <head>
    <title>YallaNotlob</title>
    <script type="text/javascript" src="./lib/assets/jquery-3.4.0.min.js"></script>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>

    <script type="text/javascript">
    jQuery(document).ready(function(){
        (function($){
          $.fn.styleddropdown = function(){
            return this.each(function(){
              var obj = $(this)
              obj.find('.field').click(function() { //onclick event, 'list' fadein
                obj.find('.list').fadeIn(400);
          
                $(document).keyup(function(event) { //keypress event, fadeout on 'escape'
                  if(event.keyCode == 27) {
                    obj.find('.list').fadeOut(400);
                  }
                });
          
                obj.find('.list').hover( function(){ }, function(){
                    $(this).fadeOut(400);
                  });  
              });
            });
          };
        })(jQuery);
              

    });

    $(function(){ $('.size').styleddropdown(); });

</script>


  </head>



  <body>
  <div class="up">
      <div class="topnav">
            
          <div class="left">
              <a class="active" href="http://localhost:3000">Home</a>
              <%= link_to "Friends", new_friendship_path %>
              <%= link_to "Groups", groups_path %>
              <%= link_to "Orders", order_index_path %>
          </div>   
          <div class="right">
          <div class="btn-group">
          <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Action
          </button>
          <div class="dropdown-menu">
            
            <% if @notifications %>
                      <% @notifications.each do |note| %>
                        
                          <a class="dropdown-item" href="#"> 
                            <strong><%= note.notifier.present? ? note.notifier.printable_notifier_name : note.parameters[:owner] %></strong>
                            <%= note.key%>
                            <%= "from " %><strong><%=  note.parameters[:restaurant] %></strong>
                          </a>
                    
                      <%end%>
                  <% else %>
                  <li readonly="readonly"  class="dropdown-item" > all read!</li> 
                  <%end%>    


            <div class="dropdown-divider"></div>
            <%= link_to 'notifications_center' ,  user_notifications_center_path %> 
          </div>
        </div>
          <div class="size">
                  <input type="text" name="test" value="notification" class="field" readonly="readonly" />
                  <ul class="list">
                  <% if @notifications %>
                      <% @notifications.each do |note| %>
                        <li>
                          <a> 
                            <strong><%= note.notifier.present? ? note.notifier.printable_notifier_name : note.parameters[:owner] %></strong>
                            <%= note.key%>
                            <%= "from " %><strong><%=  note.parameters[:restaurant] %></strong>
                          </a>
                        </li> 
                      <%end%>
                  <% else %>
                  <li readonly="readonly" > all read!</li> 
                  <%end%>    

                  <%= link_to 'notifications_center' ,  user_notifications_center_path %> 
                  
                  </ul>
                </div>  

            <a href="http://localhost:3000">user name</a> 
            <% if user_signed_in? %>
              <%= link_to('Logout', destroy_user_session_path, method: :delete) %>        
            <% else %>
              <%= link_to('Login', new_user_session_path)  %>  
            <% end %>
  
      </div>
      
      </div>
  </div>
    <%= yield %>
  </body>
</html>
